(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2bb12630"],{"3b12":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户权限",name:"first"}},[a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v("用户权限")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户名/产品线"},model:{value:e.select_word,callback:function(t){e.select_word=t},expression:"select_word"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索用户权限")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData.privileges,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"编号",prop:"id",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"tag",label:"产品线",align:"center"}}),a("el-table-column",{attrs:{prop:"template_name",label:"模板",align:"center"}}),a("el-table-column",{attrs:{prop:"grantor",label:"授权人",width:"150",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.page_total,"page-size":e.page_size,"current-page":e.cur_page},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)])],1)]),a("el-tab-pane",{attrs:{label:"用户临时权限",name:"second"}},[a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v("用户权限")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"用户名/主机名"},model:{value:e.select_key,callback:function(t){e.select_key=t},expression:"select_key"}}),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.searchTempPriv}},[e._v("搜索用户临时权限")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableTempData.privileges,border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{label:"编号",prop:"id",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"150",align:"center"}}),a("el-table-column",{attrs:{prop:"hostname",label:"主机名",align:"center"}}),a("el-table-column",{attrs:{prop:"role",label:"角色",align:"center"}}),a("el-table-column",{attrs:{prop:"grantor",label:"授权人",width:"150",align:"center"}}),a("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"red",attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.temphandleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-count":e.page_total,"page-size":e.page_size,"current-page":e.cur_page},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"删除权限",visible:e.delVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteRow}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"删除临时权限",visible:e.delTempVisible,width:"300px",center:""},on:{"update:visible":function(t){e.delTempVisible=t}}},[a("div",{staticClass:"del-dialog-cnt"},[e._v("删除不可恢复，是否确定删除？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delTempVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.deleteTempRow}},[e._v("确 定")])],1)])],1)])],1)},s=[],l=(a("96cf"),a("3b8d")),r=a("cebc"),n=a("2f62"),o=(a("aa62"),a("1c46"),{name:"basetable",data:function(){return{url:"./vuetable.json",tableData:{},tableTempData:{},cur_page:1,page_size:50,page_total:1,multipleSelection:[],select_cate:"",select_word:"",select_key:"",del_list:[],activeName:"first",is_search:!1,addVisible:!1,editVisible:!1,delVisible:!1,delTempVisible:!1,checkedList:[],login_user:"",form:{id:0,tag:"",tag_id:0,grantor:"",user_id:"",template_id:""},form_t:{id:0,username:"",hostname:"",role:"",grantor:""},idx:-1,value:"",idt:-1,value_t:""}},created:function(){this.getData()},computed:{searchData:function(){return console.log("computed:",this.$store.state.search_user_privs.data),{data:this.$store.state.search_user_privs.data}},searchTempData:function(){return{data:this.$store.state.search_user_temp_privs.data}}},methods:Object(r["a"])({},Object(n["b"])(["globalSearchUserPrivs","getUserName","SearchUserPrivs","deleteUserPriv","deleteUserTempPriv","globalSearchUserTempPrivs"]),{handleCurrentChange:function(e){this.cur_page=e,this.getData()},getData:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.getUserName();case 4:return this.login_user=this.$store.state.user.username,e.next=7,this.SearchUserPrivs(this.login_user);case 7:return e.next=9,this.globalSearchUserTempPrivs(this.login_user);case 9:this.tableData=this.$store.state.user_privs.data,this.tableTempData=this.$store.state.search_user_temp_privs.data;case 11:return e.prev=11,this.loading=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,,11,14]])}));function t(){return e.apply(this,arguments)}return t}(),loadData:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.tableData=this.searchData.data,console.log(this.searchData);case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),findUserPirvsHandler:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.globalSearchUserPrivs(this.select_word);case 2:this.tableData=this.searchData.data;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),findUserTempPrivsHandler:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.globalSearchUserTempPrivs(this.select_key);case 2:this.tableTempData=this.searchTempData.data;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),search:function(){console.log("search:",this.select_word),this.findUserPirvsHandler(this.select_word)},searchTempPriv:function(){this.findUserTempPrivsHandler(this.select_key)},handleDelete:function(e,t){this.idx=e,this.delVisible=!0},temphandleDelete:function(e,t){this.idt=e,this.delTempVisible=!0},delete_priv:function(){console.log("delete")},handleSelectionChange:function(e){this.multipleSelection=e},deleteRow:function(){console.log(">>>tableData:",this.tableData);var e=this.tableData.privileges[this.idx],t=e.id;console.log("del_id:",t),this.tableData.privileges.splice(this.idx,1),this.form.id=t,this.form.tag=e.tag,this.form.tag_id=e.tag_id,this.form.grantor=e.grantor,this.form.user_id=e.user_id,this.form.template_id=e.template_id,this.deleteUserPriv(this.form),this.delVisible=!1},deleteTempRow:function(){var e=this.tableTempData.privileges[this.idt],t=e.id;console.log("del_temp_id:",t),this.tableTempData.privileges.splice(this.idt,1),this.form_t.id=t,this.form_t.hostname=e.hostname,this.form_t.username=e.username,this.form_t.role=e.role,this.form_t.grantor=e.grantor,this.deleteUserTempPriv(this.form_t),this.delTempVisible=!1}})}),c=o,d=(a("ed56"),a("2877")),u=Object(d["a"])(c,i,s,!1,null,"527f2560",null);t["default"]=u.exports},"3f40":function(e,t,a){},ed56:function(e,t,a){"use strict";var i=a("3f40"),s=a.n(i);s.a}}]);